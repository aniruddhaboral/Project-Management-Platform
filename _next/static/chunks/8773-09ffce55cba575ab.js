"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8773],{8773:(e,a,l)=>{l.d(a,{Z:()=>j});var t=l(95155),s=l(22730),d=l(14085),r=l(20750),i=l(29602),n=l(84858),c=l(12115),o=l(46367),x=l(76046),m=l(34534),h=l(52397),p=l(94457),u=l(89134),f=l(48748);let j=e=>{let{labels:a,hiddenDescription:l=!1,onLabelUpdated:j,onLabelDeleted:b}=e,{projectId:g}=(0,x.useParams)(),{reloadLabels:N,reloadProjectTasks:v}=(0,f.J)(g),[w,y]=(0,c.useState)(""),[k,C]=(0,c.useState)(!1),R=(0,x.useSearchParams)(),{toast:S}=(0,u.dj)(),A=(0,p.U)();(0,c.useEffect)(()=>{let e=R.get("label_id");e&&y(e)},[R]);let E=async e=>{try{C(!0);let{error:a}=await A.from("labels").update({...e,updated_at:new Date}).eq("id",e.id);if(a)throw a;null==j||j(e),S({title:"Success",description:"Label updated successfully"}),y(""),await N(),await v()}catch(e){console.error("Error updating label:",e),S({variant:"destructive",title:"Error",description:"Failed to update label"})}finally{C(!1)}},F=async e=>{try{let{error:a}=await A.from("labels").delete().eq("id",e);if(a)throw a;null==b||b(e),S({title:"Success",description:"Label deleted successfully"}),await N(),await v()}catch(e){console.error("Error deleting label:",e),S({variant:"destructive",title:"Error",description:"Failed to delete label"})}};return(0,t.jsx)("div",{className:"w-full rounded-md shadow-md",children:(0,t.jsx)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:(0,t.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(e=>(0,t.jsxs)(c.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,t.jsx)(o.c,{labelText:e.label||"",description:e.description||"",color:e.color||m.hy})}),!l&&(0,t.jsx)("td",{className:"p-4 text-sm text-gray-500 dark:text-gray-400 truncate hidden md:block",children:e.description}),(0,t.jsx)("td",{className:"p-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsxs)("div",{className:"relative inline-block text-left",children:[(0,t.jsxs)("div",{className:"space-x-1 hidden lg:flex",children:[(0,t.jsx)(d.$,{className:(0,i.cn)(s.RA,"text-xs h-8 rounded-sm"),onClick:()=>y(e.id),children:"Edit"}),(0,t.jsx)(d.$,{className:(0,i.cn)(s.RA,"text-xs text-red-600 dark:text-red-300 h-8 rounded-sm"),onClick:()=>F(e.id),children:"Delete"})]}),(0,t.jsxs)(r.rI,{children:[(0,t.jsx)(r.ty,{className:"lg:hidden",children:(0,t.jsx)(n.A,{})}),(0,t.jsxs)(r.SQ,{children:[(0,t.jsx)(r._2,{onClick:()=>y(e.id),children:"Edit"}),(0,t.jsx)(r._2,{onClick:()=>F(e.id),children:"Delete"})]})]})]})})]}),w===e.id&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"p-4",children:(0,t.jsx)(h.Y,{mode:"edit",cancel:()=>y(""),save:E,data:e,isSubmitting:k})})})]},e.id))})})})}},52397:(e,a,l)=>{l.d(a,{Y:()=>j});var t=l(95155),s=l(22730),d=l(29602);let r=(0,l(67401).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var i=l(98867),n=l(12115),c=l(39286),o=l(14085),x=l(35007),m=l(9955),h=l(15785),p=l(51124),u=l(34534);let f=u.FY[1],j=e=>{let{mode:a="create",data:l,cancel:j,save:b,isSubmitting:g}=e,[N,v]=(0,n.useState)((null==l?void 0:l.label)||""),[w,y]=(0,n.useState)((null==l?void 0:l.description)||""),[k,C]=(0,n.useState)((null==l?void 0:l.color)||f);function R(e){return/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(e)}return(0,t.jsxs)(x.Zp,{className:"p-6 mb-6 bg-muted dark:bg-muted/20",children:[(0,t.jsx)(c.E,{className:"py-1 px-4 mb-8 ",style:{backgroundColor:k},children:(0,t.jsx)("span",{className:"text-white",children:N||"Label preview"})}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2 lg:flex-grow",children:[(0,t.jsx)(h.J,{children:"Label name"}),(0,t.jsx)(m.p,{placeholder:"Label name",className:"h-8",value:N,onChange:e=>v(e.currentTarget.value)})]}),(0,t.jsxs)("div",{className:"space-y-2 lg:flex-grow",children:[(0,t.jsx)(h.J,{children:"Description"}),(0,t.jsx)(m.p,{placeholder:"Description (optional)",className:"h-8",value:w,onChange:e=>y(e.currentTarget.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{children:"Color"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.$,{className:(0,d.cn)("px-3 h-8 text-white"),style:{backgroundColor:k},onClick:function(){let e=Math.floor(Math.random()*u.FY.length);C(u.FY[e])},children:(0,t.jsx)(r,{className:"w-5 h-5"})}),(0,t.jsxs)(p.AM,{children:[(0,t.jsx)(p.Wv,{children:(0,t.jsx)(m.p,{placeholder:"color",value:k,onChange:e=>C(e.currentTarget.value),className:"lg:w-[110px] h-8 ".concat(R(k)?"":"focus:ring-red-500 focus:outline-red-500")})}),(0,t.jsx)(p.hl,{className:"flex justify-center flex-wrap",children:u.FY.map(e=>(0,t.jsx)(o.$,{onClick:()=>C(e),className:"w-8 h-8 mr-2 mb-2 p-1",style:{backgroundColor:e},children:e===k&&(0,t.jsx)(i.A,{className:"w-4 h-4 text-white"})},e))})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,t.jsx)(o.$,{className:(0,d.cn)(s.RA),onClick:()=>null==j?void 0:j(),children:"Cancel"}),(0,t.jsx)(o.$,{onClick:()=>null==b?void 0:b({id:"edit"===a?null==l?void 0:l.id:crypto.randomUUID(),label:N,description:w,color:k}),className:(0,d.cn)(s.iH),disabled:!R(k)||!N.trim()||g,children:g?"Submitting...":"edit"===a?"Update label":"Create label"})]})]})]})}},46367:(e,a,l)=>{l.d(a,{c:()=>s});var t=l(95155);l(12115);let s=e=>{let{labelText:a,description:l,color:s}=e;return(0,t.jsx)("span",{title:l||a,className:"mx-1 px-2 inline-flex text-xs leading-5 font-semibold rounded-full text-white",style:{backgroundColor:s},children:a})}},35007:(e,a,l)=>{l.d(a,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>r,aR:()=>i,wL:()=>x});var t=l(95155),s=l(12115),d=l(29602);let r=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,d.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",l),...s})});r.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",l),...s})});i.displayName="CardHeader";let n=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("h3",{ref:a,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",l),...s})});n.displayName="CardTitle";let c=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("p",{ref:a,className:(0,d.cn)("text-sm text-slate-500 dark:text-slate-400",l),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,d.cn)("p-6 pt-0",l),...s})});o.displayName="CardContent";let x=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,d.cn)("flex items-center p-6 pt-0",l),...s})});x.displayName="CardFooter"},51124:(e,a,l)=>{l.d(a,{AM:()=>i,Wv:()=>n,hl:()=>c});var t=l(95155),s=l(12115),d=l(80532),r=l(29602);let i=d.bL,n=d.l9,c=s.forwardRef((e,a)=>{let{className:l,align:s="center",sideOffset:i=4,...n}=e;return(0,t.jsx)(d.ZL,{children:(0,t.jsx)(d.UC,{ref:a,align:s,sideOffset:i,className:(0,r.cn)("z-50 w-72 rounded-md border border-slate-200 bg-white p-4 text-slate-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",l),...n})})});c.displayName=d.UC.displayName}}]);