(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1839],{49574:(e,t,s)=>{Promise.resolve().then(s.bind(s,79198)),Promise.resolve().then(s.bind(s,88670))},79198:(e,t,s)=>{"use strict";s.d(t,{SettingsLayout:()=>v});var a=s(95155),l=s(14085),i=s(89282),n=s(56870),r=s(62138),d=s(45334),c=s(29602),o=s(68236),m=s(92823),x=s(34380),h=s(5414),p=s(4073),u=s(82392),f=s(87364),g=s(8926),j=s(86710),N=s(67396),b=s(76046);let y=[{label:"Project settings",link:"/settings",icon:(0,a.jsx)(o.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Manage access",link:"/settings/access",icon:(0,a.jsx)(m.A,{className:"h-4 w-4"}),minRole:"admin"},"separator",{label:"Label",link:"/settings/labels",icon:(0,a.jsx)(x.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Status",link:"/settings/statuses",icon:(0,a.jsx)(h.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Priority",link:"/settings/priorities",icon:(0,a.jsx)(p.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Size",link:"/settings/sizes",icon:(0,a.jsx)(u.A,{className:"h-4 w-4"}),minRole:"admin"}],v=e=>{let{title:t,children:s}=e,o=(0,b.usePathname)(),m=(0,b.useParams)(),{can:x}=(0,d.D)({projectId:m.projectId});return(0,a.jsxs)("div",{className:"grid h-minus-80 w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]",children:[(0,a.jsx)("div",{className:"hidden border-r 0 md:block",children:(0,a.jsxs)("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6 dark:bg-gray-950",children:[(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId),className:"flex items-center gap-2 font-semibold",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"mx-2",children:"Settings"}),x(r.kJ.VIEW_SETTINGS)&&(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId,"/insights"),className:"ml-auto",children:(0,a.jsx)(l.$,{title:"Insights",variant:"outline",size:"icon",className:"ml-auto h-8 w-8",children:(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})})]}),(0,a.jsx)("div",{className:"flex-1 ",children:(0,a.jsx)("nav",{className:"grid items-start px-2 text-sm font-medium lg:px-4",children:y.map((e,t)=>"separator"===e?(0,a.jsx)(i.Separator,{className:"my-2"},t):x(r.kJ.UPDATE_OPTIONS)?(0,a.jsxs)(N.default,{href:"/projects/".concat(m.projectId).concat(e.link),className:(0,c.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-muted-foreground transition-all hover:text-primary",o==="/projects/".concat(m.projectId).concat(e.link)?"bg-muted  text-gray-800 dark:text-gray-200":""),children:[e.icon,e.label]},e.link):(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground px-3 py-2",title:"You do not have permission to access ".concat(e.label),children:[e.icon,e.label]},e.link))})})]})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("header",{className:"flex h-14 items-center gap-4 border-b px-4 lg:h-[60px] lg:px-6 dark:bg-gray-950",children:[(0,a.jsxs)(n.cj,{children:[(0,a.jsx)(n.CG,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,a.jsx)(j.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,a.jsxs)(n.h,{side:"left",className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6 ",children:[(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId),className:"flex items-center gap-2 font-semibold",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"mx-2",children:"Settings"}),x(r.kJ.VIEW_SETTINGS)&&(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId,"/insights"),className:"ml-auto",children:(0,a.jsx)(l.$,{title:"Insights",variant:"outline",size:"icon",className:"ml-auto h-8 w-8",children:(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})})]}),(0,a.jsx)("nav",{className:"grid gap-2 text-lg font-medium",children:y.map((e,t)=>"separator"===e?(0,a.jsx)(i.Separator,{className:"my-2"},t):x(r.kJ.VIEW_SETTINGS)?(0,a.jsxs)(N.default,{href:"/projects/".concat(m.projectId).concat(e.link),className:(0,c.cn)("mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-1 text-muted-foreground hover:text-foreground",o==="/projects/".concat(m.projectId).concat(e.link)?"bg-muted  text-gray-800 dark:text-gray-200":""),children:[e.icon,e.label]},e.link):(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground px-3 py-2",title:"You do not have permission to access ".concat(e.label),children:[e.icon,e.label]},e.link))})]})]}),(0,a.jsx)("h1",{className:"text-lg font-semibold md:text-xl",children:t})]}),(0,a.jsx)("main",{children:(0,a.jsx)("div",{className:"h-full p-10",children:s})})]})]})}},88670:(e,t,s)=>{"use strict";s.d(t,{Statuses:()=>p});var a=s(95155),l=s(22730),i=s(77575),n=s(30436),r=s(14085),d=s(89134),c=s(29602),o=s(94457),m=s(49608),x=s(12115),h=s(48748);let p=e=>{let{projectId:t,items:s}=e,{reloadStatuses:p,reloadProjectTasks:u}=(0,h.J)(t),[f,g]=(0,x.useState)(s),[j,N]=(0,x.useState)(s),[b,y]=(0,x.useState)(!1),{toast:v}=(0,d.dj)(),k=(0,o.U)(),w=(0,m.i)(f,j),S=async()=>{try{y(!0);let{itemsToAdd:e,itemsToUpdate:s,itemsToDelete:a}=(0,m.m)(f,j);await Promise.all([a.length>0&&k.from("statuses").delete().in("id",a),s.length>0&&k.from("statuses").upsert(s.map(e=>({...e,project_id:t,updated_at:new Date}))),e.length>0&&k.from("statuses").insert(e.map(e=>({...e,project_id:t,updated_at:new Date})))]),g(j),v({title:"Success",description:"Statuses updated successfully"}),await p(),await u()}catch(e){console.error("Error saving statuses:",e),v({variant:"destructive",title:"Error",description:"Failed to save statuses"})}finally{y(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-end mb-2",children:(0,a.jsx)(i.u,{title:"Create new status",triggerLabel:"Create new status option",handleSubmit:e=>N(t=>[...t,{id:crypto.randomUUID(),order:t.length,...e}])})}),(0,a.jsx)(n.a,{field:"status",options:j,setOptions:N}),(0,a.jsxs)("div",{className:"flex flex-col gap-2  items-end py-4",children:[w&&(0,a.jsx)("span",{className:"text-sm text-center text-green-500 w-32",children:"unsaved"}),(0,a.jsx)(r.$,{onClick:S,className:(0,c.cn)(l.Hn),disabled:b||!w,children:b?"Saving...":"Save changes"})]})]})}},56870:(e,t,s)=>{"use strict";s.d(t,{CG:()=>o,Fm:()=>u,Qs:()=>g,cj:()=>c,h:()=>p,qp:()=>f});var a=s(95155),l=s(12115),i=s(66217),n=s(31027),r=s(40767),d=s(29602);let c=i.bL,o=i.l9;i.bm;let m=i.ZL,x=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:t})});x.displayName=i.hJ.displayName;let h=(0,n.F)("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 dark:bg-slate-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=l.forwardRef((e,t)=>{let{side:s="right",className:l,children:n,...c}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)(i.UC,{ref:t,className:(0,d.cn)(h({side:s}),l),...c,children:[n,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 dark:ring-offset-slate-950 dark:focus:ring-slate-300 dark:data-[state=open]:bg-slate-800",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=i.UC.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};u.displayName="SheetHeader";let f=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold text-slate-950 dark:text-slate-50",s),...l})});f.displayName=i.hE.displayName;let g=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,d.cn)("text-sm text-slate-500 dark:text-slate-400",s),...l})});g.displayName=i.VY.displayName},49608:(e,t,s)=>{"use strict";s.d(t,{i:()=>l,m:()=>a});let a=(e,t)=>{let s=new Map(e.map(e=>[e.id,e])),a=new Map(t.map(e=>[e.id,e])),l=[],i=[],n=[];return t.forEach(e=>{let t=s.get(e.id);t?JSON.stringify(t)!==JSON.stringify(e)&&i.push(e):l.push(e)}),e.forEach(e=>{a.has(e.id)||n.push(e.id)}),{itemsToAdd:l,itemsToUpdate:i,itemsToDelete:n}},l=(e,t)=>{let{itemsToAdd:s,itemsToUpdate:l,itemsToDelete:i}=a(e,t);return s.length>0||l.length>0||i.length>0}}},e=>{var t=t=>e(e.s=t);e.O(0,[2265,5382,4839,1931,4843,4266,547,662,3401,2556,3121,8874,8441,1517,7358],()=>t(49574)),_N_E=e.O()}]);