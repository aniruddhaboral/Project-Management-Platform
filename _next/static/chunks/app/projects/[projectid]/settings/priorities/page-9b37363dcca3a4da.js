(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1361],{23362:(e,t,s)=>{Promise.resolve().then(s.bind(s,69798)),Promise.resolve().then(s.bind(s,79198))},79198:(e,t,s)=>{"use strict";s.d(t,{SettingsLayout:()=>v});var a=s(95155),i=s(14085),l=s(89282),r=s(56870),n=s(62138),o=s(45334),d=s(29602),c=s(68236),m=s(92823),x=s(34380),p=s(5414),h=s(4073),f=s(82392),g=s(87364),u=s(8926),j=s(86710),N=s(67396),b=s(76046);let y=[{label:"Project settings",link:"/settings",icon:(0,a.jsx)(c.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Manage access",link:"/settings/access",icon:(0,a.jsx)(m.A,{className:"h-4 w-4"}),minRole:"admin"},"separator",{label:"Label",link:"/settings/labels",icon:(0,a.jsx)(x.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Status",link:"/settings/statuses",icon:(0,a.jsx)(p.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Priority",link:"/settings/priorities",icon:(0,a.jsx)(h.A,{className:"h-4 w-4"}),minRole:"admin"},{label:"Size",link:"/settings/sizes",icon:(0,a.jsx)(f.A,{className:"h-4 w-4"}),minRole:"admin"}],v=e=>{let{title:t,children:s}=e,c=(0,b.usePathname)(),m=(0,b.useParams)(),{can:x}=(0,o.D)({projectId:m.projectId});return(0,a.jsxs)("div",{className:"grid h-minus-80 w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]",children:[(0,a.jsx)("div",{className:"hidden border-r 0 md:block",children:(0,a.jsxs)("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6 dark:bg-gray-950",children:[(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId),className:"flex items-center gap-2 font-semibold",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"mx-2",children:"Settings"}),x(n.kJ.VIEW_SETTINGS)&&(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId,"/insights"),className:"ml-auto",children:(0,a.jsx)(i.$,{title:"Insights",variant:"outline",size:"icon",className:"ml-auto h-8 w-8",children:(0,a.jsx)(u.A,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})})]}),(0,a.jsx)("div",{className:"flex-1 ",children:(0,a.jsx)("nav",{className:"grid items-start px-2 text-sm font-medium lg:px-4",children:y.map((e,t)=>"separator"===e?(0,a.jsx)(l.Separator,{className:"my-2"},t):x(n.kJ.UPDATE_OPTIONS)?(0,a.jsxs)(N.default,{href:"/projects/".concat(m.projectId).concat(e.link),className:(0,d.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-muted-foreground transition-all hover:text-primary",c==="/projects/".concat(m.projectId).concat(e.link)?"bg-muted  text-gray-800 dark:text-gray-200":""),children:[e.icon,e.label]},e.link):(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground px-3 py-2",title:"You do not have permission to access ".concat(e.label),children:[e.icon,e.label]},e.link))})})]})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("header",{className:"flex h-14 items-center gap-4 border-b px-4 lg:h-[60px] lg:px-6 dark:bg-gray-950",children:[(0,a.jsxs)(r.cj,{children:[(0,a.jsx)(r.CG,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,a.jsx)(j.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,a.jsxs)(r.h,{side:"left",className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6 ",children:[(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId),className:"flex items-center gap-2 font-semibold",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"mx-2",children:"Settings"}),x(n.kJ.VIEW_SETTINGS)&&(0,a.jsx)(N.default,{href:"/projects/".concat(m.projectId,"/insights"),className:"ml-auto",children:(0,a.jsx)(i.$,{title:"Insights",variant:"outline",size:"icon",className:"ml-auto h-8 w-8",children:(0,a.jsx)(u.A,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})})]}),(0,a.jsx)("nav",{className:"grid gap-2 text-lg font-medium",children:y.map((e,t)=>"separator"===e?(0,a.jsx)(l.Separator,{className:"my-2"},t):x(n.kJ.VIEW_SETTINGS)?(0,a.jsxs)(N.default,{href:"/projects/".concat(m.projectId).concat(e.link),className:(0,d.cn)("mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-1 text-muted-foreground hover:text-foreground",c==="/projects/".concat(m.projectId).concat(e.link)?"bg-muted  text-gray-800 dark:text-gray-200":""),children:[e.icon,e.label]},e.link):(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground px-3 py-2",title:"You do not have permission to access ".concat(e.label),children:[e.icon,e.label]},e.link))})]})]}),(0,a.jsx)("h1",{className:"text-lg font-semibold md:text-xl",children:t})]}),(0,a.jsx)("main",{children:(0,a.jsx)("div",{className:"h-full p-10",children:s})})]})]})}},69798:(e,t,s)=>{"use strict";s.d(t,{Priorities:()=>h});var a=s(95155),i=s(22730),l=s(77575),r=s(30436),n=s(14085),o=s(89134),d=s(48748),c=s(29602),m=s(49608),x=s(94457),p=s(12115);let h=e=>{let{projectId:t,items:s}=e,{reloadPriorities:h,reloadProjectTasks:f}=(0,d.J)(t),[g,u]=(0,p.useState)(s),[j,N]=(0,p.useState)(s),[b,y]=(0,p.useState)(!1),{toast:v}=(0,o.dj)(),w=(0,x.U)(),k=(0,m.i)(g,j),S=async()=>{try{y(!0);let{itemsToAdd:e,itemsToUpdate:s,itemsToDelete:a}=(0,m.m)(g,j);await Promise.all([a.length>0&&w.from("priorities").delete().in("id",a),s.length>0&&w.from("priorities").upsert(s.map(e=>({...e,project_id:t,updated_at:new Date}))),e.length>0&&w.from("priorities").insert(e.map(e=>({...e,project_id:t,updated_at:new Date})))]),u(j),v({title:"Success",description:"Priorities updated successfully"}),await h(),await f()}catch(e){console.error("Error saving priorities:",e),v({variant:"destructive",title:"Error",description:"Failed to save priorities"})}finally{y(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-end mb-2",children:(0,a.jsx)(l.u,{title:"Create new priority",triggerLabel:"Create new priority option",handleSubmit:e=>N(t=>[...t,{id:crypto.randomUUID(),order:t.length,...e}])})}),(0,a.jsx)(r.a,{field:"priority",options:j,setOptions:N,description:"Priorities are ordered from lowest (top) to highest (bottom). The last item in the list has the highest priority."}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-end py-4",children:[k&&(0,a.jsx)("span",{className:"text-sm text-center text-green-500 w-32",children:"unsaved"}),(0,a.jsx)(n.$,{onClick:S,className:(0,c.cn)(i.Hn),disabled:b||!k,children:b?"Saving...":"Save changes"})]})]})}},56870:(e,t,s)=>{"use strict";s.d(t,{CG:()=>c,Fm:()=>f,Qs:()=>u,cj:()=>d,h:()=>h,qp:()=>g});var a=s(95155),i=s(12115),l=s(66217),r=s(31027),n=s(40767),o=s(29602);let d=l.bL,c=l.l9;l.bm;let m=l.ZL,x=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i,ref:t})});x.displayName=l.hJ.displayName;let p=(0,r.F)("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 dark:bg-slate-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=i.forwardRef((e,t)=>{let{side:s="right",className:i,children:r,...d}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)(l.UC,{ref:t,className:(0,o.cn)(p({side:s}),i),...d,children:[r,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 dark:ring-offset-slate-950 dark:focus:ring-slate-300 dark:data-[state=open]:bg-slate-800",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.UC.displayName;let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};f.displayName="SheetHeader";let g=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold text-slate-950 dark:text-slate-50",s),...i})});g.displayName=l.hE.displayName;let u=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-slate-500 dark:text-slate-400",s),...i})});u.displayName=l.VY.displayName},49608:(e,t,s)=>{"use strict";s.d(t,{i:()=>i,m:()=>a});let a=(e,t)=>{let s=new Map(e.map(e=>[e.id,e])),a=new Map(t.map(e=>[e.id,e])),i=[],l=[],r=[];return t.forEach(e=>{let t=s.get(e.id);t?JSON.stringify(t)!==JSON.stringify(e)&&l.push(e):i.push(e)}),e.forEach(e=>{a.has(e.id)||r.push(e.id)}),{itemsToAdd:i,itemsToUpdate:l,itemsToDelete:r}},i=(e,t)=>{let{itemsToAdd:s,itemsToUpdate:i,itemsToDelete:l}=a(e,t);return s.length>0||i.length>0||l.length>0}}},e=>{var t=t=>e(e.s=t);e.O(0,[2265,5382,4839,1931,4843,4266,547,662,3401,2556,3121,8874,8441,1517,7358],()=>t(23362)),_N_E=e.O()}]);