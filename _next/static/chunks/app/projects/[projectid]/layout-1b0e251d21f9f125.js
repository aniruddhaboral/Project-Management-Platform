(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3511],{69192:(e,t,r)=>{Promise.resolve().then(r.bind(r,24809))},24809:(e,t,r)=>{"use strict";r.d(t,{ProjectLayoutClient:()=>n});var a=r(53803),i=r(35906),s=r(76046),o=r(12115);function n(){let e=(0,s.useParams)(),t=(0,i.jE)();return(0,o.useEffect)(()=>{e.projectId&&(0,a.o)(t,e.projectId)},[e.projectId,t]),null}},53803:(e,t,r)=>{"use strict";r.d(t,{E:()=>s,o:()=>o});var a=r(49297),i=r(547);let s=e=>{let{data:t,isLoading:r,error:s}=(0,i.I)({queryKey:["project",e,"owner"],queryFn:()=>a.d.members.getProjectOwner(e),enabled:!!e,staleTime:3e5,gcTime:18e5});return{owner:t,isLoading:r,error:s}},o=async(e,t)=>{await e.prefetchQuery({queryKey:["project",t,"owner"],queryFn:()=>a.d.members.getProjectOwner(t),staleTime:3e5,gcTime:18e5})}},49297:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});let a=(0,r(94457).U)(),i={management:{create:async(e,t)=>{try{let{data:r,error:i}=await a.from("projects").insert({name:e.name,description:e.description,readme:e.readme,created_by:t,updated_at:new Date,closed:!1}).select().single();if(i)throw i;if(e.statuses){let{error:t}=await a.from("statuses").insert(e.statuses.map((e,t)=>({...e,project_id:r.id,order:t,limit:5,updated_at:new Date})));if(t)throw t}if(e.labels){let{error:t}=await a.from("labels").insert(e.labels.map(e=>({...e,project_id:r.id,updated_at:new Date})));if(t)throw t}if(e.priorities){let{error:t}=await a.from("priorities").insert(e.priorities.map(e=>({...e,project_id:r.id,updated_at:new Date})));if(t)throw t}if(e.sizes){let{error:t}=await a.from("sizes").insert(e.sizes.map(e=>({...e,project_id:r.id,updated_at:new Date})));if(t)throw t}return r}catch(e){throw e}},update:async(e,t)=>{let{error:r}=await a.from("projects").update({...t,updated_at:new Date}).eq("id",e);if(r)throw r},delete:async e=>{let{error:t}=await a.from("projects").delete().eq("id",e);if(t)throw t},close:async e=>{let{error:t}=await a.from("projects").update({closed:!0,updated_at:new Date}).eq("id",e);if(t)throw t},reopen:async e=>{let{error:t}=await a.from("projects").update({closed:!1,updated_at:new Date}).eq("id",e);if(t)throw t}},fields:{getStatuses:async e=>{let{data:t,error:r}=await a.from("statuses").select("*").eq("project_id",e).order("order");if(r)throw r;return t},getLabels:async e=>{let{data:t,error:r}=await a.from("labels").select("*").eq("project_id",e);if(r)throw r;return t},getPriorities:async e=>{let{data:t,error:r}=await a.from("priorities").select("*").eq("project_id",e).order("order");if(r)throw r;return t},getSizes:async e=>{let{data:t,error:r}=await a.from("sizes").select("*").eq("project_id",e).order("order");if(r)throw r;return t}},members:{getAll:async e=>{let{data:t,error:r}=await a.from("project_members").select("\n          user:users (\n            id,\n            name,\n            avatar,\n            description,\n            links\n          )\n        ").eq("project_id",e);if(r)throw r;return t.map(e=>e.user)},getProjectOwner:async e=>{let{data:t,error:r}=await a.from("projects").select("\n          creator:created_by (\n            id,\n            name,\n            email,\n            avatar,\n            description,\n            links,\n            created_at,\n            updated_at\n          )\n        ").eq("id",e).single();if(r)throw r;if(!(null==t?void 0:t.creator))return null;let i=t.creator;return{id:i.id,name:i.name,email:i.email,avatar:i.avatar,description:i.description,links:i.links,created_at:i.created_at,updated_at:i.updated_at}}},getUserProjects:async e=>{let[t,r]=await Promise.all([a.from("projects").select("*").eq("created_by",e).order("created_at",{ascending:!1}),a.from("project_members").select("\n          project:projects (*) \n        ").eq("user_id",e).eq("invitationStatus","accepted").order("created_at",{ascending:!1}).not("project.created_by","eq",e)]);if(t.error)throw t.error;if(r.error)throw r.error;return[...t.data,...r.data.map(e=>e.project)]}}},94457:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var a=r(95382);let i=()=>(0,a.createBrowserClient)("https://odwydhaqevttdqexyfdw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kd3lkaGFxZXZ0dGRxZXh5ZmR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyNTQwMDcsImV4cCI6MjA3MTgzMDAwN30.iTpgn3KmQbthonggnzc1Qur9jLQ-LNl30G3oLvAs10w")}},e=>{var t=t=>e(e.s=t);e.O(0,[5382,4266,547,8441,1517,7358],()=>t(69192)),_N_E=e.O()}]);