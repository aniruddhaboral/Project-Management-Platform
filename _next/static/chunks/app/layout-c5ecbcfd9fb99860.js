(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{30718:(e,t,s)=>{Promise.resolve().then(s.bind(s,23229)),Promise.resolve().then(s.t.bind(s,2608,23)),Promise.resolve().then(s.t.bind(s,19324,23))},23229:(e,t,s)=>{"use strict";s.d(t,{AppProvider:()=>G});var a=s(95155),r=s(16977),i=s(35906),l=s(12115),o=s(9930),n=s(31027),d=s(40767),c=s(29602);let u=o.Kq,m=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.LM,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});m.displayName=o.LM.displayName;let f=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-slate-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-slate-800",{variants:{variant:{default:"border bg-white text-slate-950 dark:bg-slate-950 dark:text-slate-50",destructive:"destructive group border-red-500 bg-red-500 text-slate-50 dark:border-red-900 dark:bg-red-900 dark:text-slate-50"}},defaultVariants:{variant:"default"}}),p=l.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)(o.bL,{ref:t,className:(0,c.cn)(f({variant:r}),s),...i})});p.displayName=o.bL.displayName,l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.rc,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-slate-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-slate-50 group-[.destructive]:focus:ring-red-500 dark:border-slate-800 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:focus:ring-slate-300 dark:group-[.destructive]:border-slate-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-slate-50 dark:group-[.destructive]:focus:ring-red-900",s),...r})}).displayName=o.rc.displayName;let h=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.bm,{ref:t,className:(0,c.cn)("absolute right-2 top-2 rounded-md p-1 text-slate-950/50 opacity-0 transition-opacity hover:text-slate-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-slate-50/50 dark:hover:text-slate-50",s),"toast-close":"",...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=o.bm.displayName;let x=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.hE,{ref:t,className:(0,c.cn)("text-sm font-semibold",s),...r})});x.displayName=o.hE.displayName;let g=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.VY,{ref:t,className:(0,c.cn)("text-sm opacity-90",s),...r})});g.displayName=o.VY.displayName;var b=s(89134);function y(){let{toasts:e}=(0,b.dj)();return(0,a.jsxs)(u,{children:[e.map(function(e){let{id:t,title:s,description:r,action:i,...l}=e;return(0,a.jsxs)(p,{...l,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(x,{children:s}),r&&(0,a.jsx)(g,{children:r})]}),i,(0,a.jsx)(h,{})]},t)}),(0,a.jsx)(m,{})]})}var v=s(18767),w=s(87725),E=s(22104),j=s(45024),k=s(67113),T=s(14085),N=s(20750);function _(){let{setTheme:e}=(0,k.D)();return(0,a.jsxs)(N.rI,{children:[(0,a.jsx)(N.ty,{asChild:!0,children:(0,a.jsxs)(T.$,{variant:"outline",size:"icon",children:[(0,a.jsx)(w.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(E.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(N.SQ,{align:"end",children:[(0,a.jsxs)(N._2,{onClick:()=>e("light"),children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Light"})]}),(0,a.jsxs)(N._2,{onClick:()=>e("dark"),children:[(0,a.jsx)(E.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Dark"})]}),(0,a.jsxs)(N._2,{onClick:()=>e("system"),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"System"})]})]})]})}var S=s(55491),I=s(1466),O=s(16233),A=s(65236),P=s(67396),R=s(5565),J=s(9133),B=s(76046);function M(e){let{user:t}=e,s=(0,B.useRouter)(),{toast:r}=(0,b.dj)(),i=async()=>{try{await J.j.signOut(),s.push("/login"),s.refresh()}catch(e){r({variant:"destructive",title:"Error",description:"Failed to sign out. Please try again."})}};return(0,a.jsxs)(N.rI,{children:[(0,a.jsx)(N.ty,{asChild:!0,children:(0,a.jsxs)(T.$,{variant:"ghost",size:"icon",className:"relative h-9 w-9 rounded-full border bg-background",children:[t.user_metadata.avatar_url?(0,a.jsx)(R.default,{src:t.user_metadata.avatar_url,alt:t.email||"",fill:!0,className:"rounded-full object-cover",referrerPolicy:"no-referrer"}):(0,a.jsx)(S.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Open user menu"})]})}),(0,a.jsxs)(N.SQ,{className:"w-56",align:"end",children:[(0,a.jsx)(N.lp,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:t.user_metadata.full_name||t.email}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),(0,a.jsx)(N.mB,{}),(0,a.jsxs)(N.I,{children:[(0,a.jsx)(N._2,{asChild:!0,children:(0,a.jsxs)(P.default,{href:"/profile",className:"w-full cursor-pointer",children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Profile"})]})}),(0,a.jsx)(N._2,{asChild:!0,children:(0,a.jsxs)(P.default,{href:"/projects",className:"w-full cursor-pointer",children:[(0,a.jsx)(O.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Projects"})]})})]}),(0,a.jsx)(N.mB,{}),(0,a.jsxs)(N._2,{className:"cursor-pointer text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400",onSelect:i,children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Sign out"})]})]})]})}var C=s(94457),z=s(92914);let U=(0,C.U)(),V=e=>{let{className:t}=e,[s,r]=(0,l.useState)(null),[i,o]=(0,l.useState)(!0);return(0,B.usePathname)(),((0,l.useEffect)(()=>{U.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;r(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),o(!1)});let{data:{subscription:e}}=U.auth.onAuthStateChange((e,t)=>{var s;t||z.z.getState().reset(),r(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)});return()=>e.unsubscribe()},[]),i)?null:(0,a.jsx)("header",{className:(0,c.cn)("fixed top-0 w-full z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",t),children:(0,a.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,a.jsx)(P.default,{href:s?"/projects":"/",className:"flex items-center space-x-2 font-bold text-xl hover:text-primary transition-colors",children:"PMP Tool"}),(0,a.jsxs)("div",{className:"border-l pl-4 dark:border-gray-800 flex items-center gap-1",children:[s?(0,a.jsx)(M,{user:s}):(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T.$,{asChild:!0,className:"bg-green-600 hover:bg-green-700",children:(0,a.jsx)(P.default,{href:"/login",children:"Login"})})})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(_,{})})]})]})})};function D(e){let{children:t,...s}=e;return(0,a.jsx)(k.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,...s,children:t})}let L=new r.E;function G(e){let{children:t}=e;return(0,a.jsxs)(i.Ht,{client:L,children:[(0,a.jsxs)(D,{children:[(0,a.jsx)("div",{className:"h-16",children:(0,a.jsx)(V,{})}),t]}),(0,a.jsx)(y,{}),(0,a.jsx)(v.E,{initialIsOpen:!1})]})}},14085:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>n});var a=s(95155),r=s(12115),i=s(12317),l=s(31027),o=s(29602);let n=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(n({variant:r,size:l,className:s})),ref:t,...c})});d.displayName="Button"},20750:(e,t,s)=>{"use strict";s.d(t,{I:()=>m,SQ:()=>f,_2:()=>p,lp:()=>h,mB:()=>x,rI:()=>c,ty:()=>u});var a=s(95155),r=s(12115),i=s(80937),l=s(46967),o=s(98867),n=s(33565),d=s(29602);let c=i.bL,u=i.l9,m=i.YJ;i.ZL,i.Pb,i.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:o,...n}=e;return(0,a.jsxs)(i.ZP,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-100 data-[state=open]:bg-slate-100 dark:focus:bg-slate-800 dark:data-[state=open]:bg-slate-800",r&&"pl-8",s),...n,children:[o,(0,a.jsx)(l.A,{className:"ml-auto h-4 w-4"})]})}).displayName=i.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...r})}).displayName=i.G5.displayName;let f=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...l})})});f.displayName=i.UC.displayName;let p=r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(i.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",r&&"pl-8",s),...l})});p.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:l,...n}=e;return(0,a.jsxs)(i.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",s),checked:l,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),r]})}).displayName=i.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(i.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(n.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=i.hN.displayName;let h=r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(i.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...l})});h.displayName=i.JU.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",s),...r})});x.displayName=i.wv.displayName},89134:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var a=s(12115);let r=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],d={toasts:[]};function c(e){d=o(d,e),n.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},62138:(e,t,s)=>{"use strict";s.d(t,{d4:()=>a,kJ:()=>r});var a=function(e){return e.TasksByStatus="status,none",e.TasksByLabel="label,none",e.TasksBySize="size,none",e.TasksByPriority="priority,none",e.TasksByStatusGroupedByLabel="status,label",e.TasksByStatusGroupedBySize="status,size",e.TasksByStatusGroupedByPriority="status,priority",e.TasksByLabelGroupedByStatus="label,status",e.TasksByLabelGroupedBySize="label,size",e.TasksByLabelGroupedByPriority="label,priority",e.TasksBySizeGroupedByStatus="size,status",e.TasksBySizeGroupedByLabel="size,label",e.TasksBySizeGroupedByPriority="size,priority",e.TasksByPriorityGroupedByStatus="priority,status",e.TasksByPriorityGroupedByLabel="priority,label",e.TasksByPriorityGroupedBySize="priority,size",e}({}),r=function(e){return e.UPDATE_PROJECT="update_project",e.DELETE_PROJECT="delete_project",e.CLOSE_PROJECT="close_project",e.VIEW_SETTINGS="view_settings",e.VIEW_OPTIONS="view_options",e.CREATE_OPTIONS="create_options",e.UPDATE_OPTIONS="update_options",e.DELETE_OPTIONS="delete_options",e.VIEW_MEMBERS="view_members",e.INVITE_MEMBERS="invite_members",e.UPDATE_MEMBER_ROLE="update_member_role",e.REMOVE_MEMBERS="remove_members",e.VIEW_TASKS="view_tasks",e.MOVE_TASKS="move_tasks",e.CREATE_TASKS="create_tasks",e.UPDATE_TASKS="update_tasks",e.DELETE_TASKS="delete_tasks",e}({})},29602:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(43463),r=s(69795);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},92914:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var a=s(99827),r=s(94457),i=s(62138);let l=(0,r.U)(),o=(0,a.v)((e,t)=>({permissions:{},roles:{},isCreator:{},setProjectAccess:(t,s)=>{let{permissions:a,role:r,isCreator:i}=s;return e(e=>({permissions:{...e.permissions,[t]:a},roles:{...e.roles,[t]:r},isCreator:{...e.isCreator,[t]:i}}))},fetchProjectAccess:async e=>{if(!e)return;let{data:{session:s}}=await l.auth.getSession();if(!s)return;let{data:a}=await l.from("projects").select("created_by").eq("id",e).maybeSingle(),{data:r,error:o}=await l.from("project_members").select("role").eq("project_id",e).eq("user_id",s.user.id).maybeSingle();o&&console.error("Error fetching member role:",o);let n=(null==a?void 0:a.created_by)===s.user.id,d=n?"owner":(null==r?void 0:r.role)||"read",c=function(e){let t=[i.kJ.UPDATE_PROJECT,i.kJ.DELETE_PROJECT,i.kJ.CLOSE_PROJECT],s=[i.kJ.VIEW_SETTINGS,i.kJ.VIEW_OPTIONS,i.kJ.CREATE_OPTIONS,i.kJ.UPDATE_OPTIONS,i.kJ.DELETE_OPTIONS],a=[i.kJ.VIEW_MEMBERS,i.kJ.INVITE_MEMBERS,i.kJ.UPDATE_MEMBER_ROLE,i.kJ.REMOVE_MEMBERS],r=[i.kJ.VIEW_TASKS,i.kJ.MOVE_TASKS,i.kJ.CREATE_TASKS,i.kJ.UPDATE_TASKS,i.kJ.DELETE_TASKS],l={owner:[...t,...s,...a,...r],admin:[i.kJ.CLOSE_PROJECT,i.kJ.UPDATE_PROJECT,...s,...a,...r],write:[i.kJ.VIEW_SETTINGS,i.kJ.VIEW_OPTIONS,i.kJ.CREATE_OPTIONS,i.kJ.UPDATE_OPTIONS,i.kJ.VIEW_MEMBERS,...r],read:[i.kJ.VIEW_OPTIONS,i.kJ.VIEW_MEMBERS,i.kJ.VIEW_TASKS,i.kJ.MOVE_TASKS]}[e];return Object.values(i.kJ).reduce((e,t)=>({...e,[t]:l.includes(t)}),{})}(d);t().setProjectAccess(e,{permissions:c,role:d,isCreator:n})},reset:()=>e({permissions:{},roles:{},isCreator:{}}),requiresMinRole:(e,s)=>{let a={owner:3,admin:2,write:1,read:0},r=t().roles[e];return!!r&&a[r]>=a[s]}}))},9133:(e,t,s)=>{"use strict";s.d(t,{j:()=>o});var a=s(92914),r=s(94457),i=s(61105);let l=(0,r.U)(),o={async signUp(e,t){var s;let{data:a,error:r}=await l.from("users").select("id").eq("email",e).single();if(a)throw Error("This email is already registered. Try signing in instead.");if(r&&"PGRST116"!==r.code)throw r;let{data:o,error:n}=await l.auth.signUp({email:e,password:t,options:{emailRedirectTo:"".concat(location.origin,"/auth/callback")}});if(n)throw n;if(!o.user)throw Error("Failed to create user account");if((null===(s=o.user.identities)||void 0===s?void 0:s.length)===0)try{await i.V.captureUserDetails(o.user)}catch(e){throw await l.auth.admin.deleteUser(o.user.id),e}return o},async signIn(e,t){let{data:s,error:a}=await l.auth.signInWithPassword({email:e,password:t});if(a)throw a;return s.user&&await i.V.captureUserDetails(s.user),s},async signInWithOAuth(e,t){let{data:s,error:a}=await l.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(location.origin,"/auth/callback?next=").concat(t||"/")}});if(a)throw a;return s},async signOut(){let{error:e}=await l.auth.signOut();if(a.z.getState().reset(),e)throw{message:e.message,status:e.status}},async resetPasswordRequest(e){let{data:t,error:s}=await l.from("users").select("id, provider").eq("email",e).single();if(s&&"PGRST116"!==s.code)throw s;if(!t||"email"!==t.provider)return{success:!0,message:"If an account exists, a password reset link will be sent."};let a="".concat(location.origin,"/auth/reset-password"),{data:r,error:i}=await l.auth.resetPasswordForEmail(e,{redirectTo:a});if(i)throw i;return{success:!0,message:"If an account exists, a password reset link will be sent."}},async resetPassword(e){let{data:t,error:s}=await l.auth.updateUser({password:e});if(s)throw{message:s.message,status:s.status};return t}}},94457:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var a=s(95382);let r=()=>(0,a.createBrowserClient)("https://odwydhaqevttdqexyfdw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kd3lkaGFxZXZ0dGRxZXh5ZmR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyNTQwMDcsImV4cCI6MjA3MTgzMDAwN30.iTpgn3KmQbthonggnzc1Qur9jLQ-LNl30G3oLvAs10w")},61105:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});let a=(0,s(94457).U)(),r={async getUser(e){let{data:t,error:s}=await a.from("users").select("*").eq("id",e).single();if(s)throw s;return t},async createUser(e){let{data:t,error:s}=await a.from("users").insert([e]).select().single();if(s)throw s;return t},async captureUserDetails(e){let t=await this.getUser(e.id).catch(()=>null);if(t)return t;let s=e.app_metadata.provider,a={id:e.id,email:e.email,name:e.user_metadata.full_name||e.email.split("@")[0],avatar:e.user_metadata.avatar_url||"",description:"",provider:s,links:[]};return await this.createUser(a)},async updateUser(e,t){let{data:s,error:r}=await a.from("users").update(t).eq("id",e).select().single();if(r)throw r;return s},async updateProfile(e,t){let{error:s}=await a.from("users").update(t).eq("id",e);if(s)throw s;let r={};if(void 0!==t.avatar&&(r.avatar_url=t.avatar),void 0!==t.name&&(r.full_name=t.name),Object.keys(r).length>0){let{error:e}=await a.auth.updateUser({data:r});e&&console.error("Failed to update auth user metadata:",e)}}}},19324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[3433,2265,5382,4839,1931,4843,4266,9224,9737,8441,1517,7358],()=>t(30718)),_N_E=e.O()}]);