"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3121],{39286:(e,a,t)=>{t.d(a,{E:()=>i});var s=t(95155);t(12115);var r=t(31027),l=t(29602);let d=(0,r.F)("inline-flex items-center rounded-full border border-slate-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 dark:border-slate-800 dark:focus:ring-slate-300",{variants:{variant:{default:"border-transparent bg-slate-900 text-slate-50 hover:bg-slate-900/80 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/80",secondary:"border-transparent bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",destructive:"border-transparent bg-red-500 text-slate-50 hover:bg-red-500/80 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/80",outline:"text-slate-950 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(d({variant:t}),a),...r})}},20750:(e,a,t)=>{t.d(a,{I:()=>f,SQ:()=>m,_2:()=>p,lp:()=>b,mB:()=>y,rI:()=>c,ty:()=>u});var s=t(95155),r=t(12115),l=t(80937),d=t(46967),i=t(98867),n=t(33565),o=t(29602);let c=l.bL,u=l.l9,f=l.YJ;l.ZL,l.Pb,l.z6,r.forwardRef((e,a)=>{let{className:t,inset:r,children:i,...n}=e;return(0,s.jsxs)(l.ZP,{ref:a,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-100 data-[state=open]:bg-slate-100 dark:focus:bg-slate-800 dark:data-[state=open]:bg-slate-800",r&&"pl-8",t),...n,children:[i,(0,s.jsx)(d.A,{className:"ml-auto h-4 w-4"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.G5,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",t),...r})}).displayName=l.G5.displayName;let m=r.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...d}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:a,sideOffset:r,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",t),...d})})});m.displayName=l.UC.displayName;let p=r.forwardRef((e,a)=>{let{className:t,inset:r,...d}=e;return(0,s.jsx)(l.q7,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",r&&"pl-8",t),...d})});p.displayName=l.q7.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,checked:d,...n}=e;return(0,s.jsxs)(l.H_,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",t),checked:d,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,...d}=e;return(0,s.jsxs)(l.hN,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",t),...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let b=r.forwardRef((e,a)=>{let{className:t,inset:r,...d}=e;return(0,s.jsx)(l.JU,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...d})});b.displayName=l.JU.displayName;let y=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",t),...r})});y.displayName=l.wv.displayName},15785:(e,a,t)=>{t.d(a,{J:()=>o});var s=t(95155),r=t(12115),l=t(46195),d=t(31027),i=t(29602);let n=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.b,{ref:a,className:(0,i.cn)(n(),t),...r})});o.displayName=l.b.displayName},89282:(e,a,t)=>{t.d(a,{Separator:()=>i});var s=t(95155),r=t(12115),l=t(90434),d=t(29602);let i=r.forwardRef((e,a)=>{let{className:t,orientation:r="horizontal",decorative:i=!0,...n}=e;return(0,s.jsx)(l.b,{ref:a,decorative:i,orientation:r,className:(0,d.cn)("shrink-0 bg-slate-200 dark:bg-slate-800","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...n})});i.displayName=l.b.displayName},48748:(e,a,t)=>{t.d(a,{J:()=>i});var s=t(35906),r=t(547),l=t(49297),d=t(95475);let i=e=>{let a=(0,s.jE)(),{data:t,refetch:i}=(0,r.I)({queryKey:["project-tasks",e],queryFn:()=>d.v.board.getProjectTasks(e),enabled:!!e,staleTime:1/0,gcTime:18e5}),{data:n,refetch:o}=(0,r.I)({queryKey:["project-members",e],queryFn:()=>l.d.members.getAll(e),enabled:!!e,staleTime:1/0,gcTime:18e5}),{data:c,refetch:u}=(0,r.I)({queryKey:["project-labels",e],queryFn:()=>l.d.fields.getLabels(e),enabled:!!e,staleTime:1/0,gcTime:18e5}),{data:f,refetch:m}=(0,r.I)({queryKey:["project-statuses",e],queryFn:()=>l.d.fields.getStatuses(e),enabled:!!e,staleTime:1/0,gcTime:18e5}),{data:p,refetch:b}=(0,r.I)({queryKey:["project-priorities",e],queryFn:()=>l.d.fields.getPriorities(e),enabled:!!e,staleTime:1/0,gcTime:18e5}),{data:y,refetch:g}=(0,r.I)({queryKey:["project-sizes",e],queryFn:()=>l.d.fields.getSizes(e),enabled:!!e,staleTime:1/0,gcTime:18e5});return{projectTasks:t,members:n,labels:c,statuses:f,priorities:p,sizes:y,reloadProjectTasks:async()=>(await a.invalidateQueries({queryKey:["project-tasks",e]}),i()),reloadMembers:async()=>(await a.invalidateQueries({queryKey:["project-members",e]}),o()),reloadLabels:async()=>(await a.invalidateQueries({queryKey:["project-labels",e]}),u()),reloadStatuses:async()=>(await a.invalidateQueries({queryKey:["project-statuses",e]}),m()),reloadPriorities:async()=>(await a.invalidateQueries({queryKey:["project-priorities",e]}),b()),reloadSizes:async()=>(await a.invalidateQueries({queryKey:["project-sizes",e]}),g())}}},95475:(e,a,t)=>{t.d(a,{v:()=>r});let s=(0,t(94457).U)(),r={board:{getProjectTasks:async e=>{let{data:a,error:t}=await s.from("tasks").select("\n          id,\n          title,\n          status_id,\n          statusPosition,\n          creator:created_by ( id, name, avatar ),\n          size ( id, label, color ),\n          priority ( id, label, color, order ),\n          task_labels (\n            labels ( id, label, color )\n          ),\n          task_assignees (\n            users ( id, name, avatar, description, links )\n          )\n        ").eq("project_id",e);if(t)throw t;return a.map(e=>{var a,t;return{...e,labels:(null===(a=e.task_labels)||void 0===a?void 0:a.map(e=>e.labels))||[],assignees:(null===(t=e.task_assignees)||void 0===t?void 0:t.map(e=>e.users))||[],task_labels:null,task_assignees:null}})},updatePosition:async(e,a)=>{let{data:t,error:r}=await s.from("tasks").update({statusPosition:a,updated_at:new Date}).eq("id",e).select("*").single();if(r)throw r;return t},moveTask:async(e,a,t)=>{let{data:r,error:l}=await s.from("tasks").update({status_id:a,statusPosition:t,updated_at:new Date}).eq("id",e).select("*").single();if(l)throw l;return r}},details:{get:async e=>{var a,t;let{data:r,error:l}=await s.from("tasks").select("\n          *,\n          creator:created_by ( id, name, avatar, description, links ),\n          size ( id, label, color ),\n          priority ( id, label, color, order ),\n          task_labels (\n            labels ( id, label, color )\n          ),\n          task_assignees (\n            users ( id, name, description, avatar, links )\n          )\n        ").eq("id",e).single();if(l)throw l;return{...r,labels:(null===(a=r.task_labels)||void 0===a?void 0:a.map(e=>e.labels))||[],assignees:(null===(t=r.task_assignees)||void 0===t?void 0:t.map(e=>e.users))||[],task_labels:null,task_assignees:null}},update:async(e,a)=>{if("labels"in a){let t=a.labels||[];delete a.labels,await s.from("task_labels").delete().eq("task_id",e),t.length>0&&await s.from("task_labels").insert(t.map(a=>({task_id:e,label_id:a,created_at:new Date,updated_at:new Date})))}if("assignees"in a){let t=a.assignees||[];delete a.assignees,await s.from("task_assignees").delete().eq("task_id",e),t.length>0&&await s.from("task_assignees").insert(t.map(a=>({task_id:e,user_id:a,created_at:new Date,updated_at:new Date})))}if(Object.keys(a).length>0){let{data:t,error:r}=await s.from("tasks").update({...a,updated_at:new Date}).eq("id",e).select("*").single();if(r)throw r;return t}return null},delete:async e=>{let{error:a}=await s.from("tasks").delete().eq("id",e);if(a)throw a},updateDates:async(e,a)=>{let{data:t,error:r}=await s.from("tasks").update({startDate:a.startDate,endDate:a.endDate,updated_at:new Date().toISOString()}).eq("id",e).select("*").single();if(r)throw r;return t}},create:async e=>{let{data:a,error:t}=await s.from("tasks").insert(e).select("\n        *,\n        creator:created_by (\n          id,\n          name,\n          avatar\n        )\n      ").single();if(t)throw t;return a}}}}]);