"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4432],{61231:(e,t,s)=>{s.d(t,{H:()=>i});var a=s(95155),l=s(63898),r=s(12115),n=s(29602);let i=r.memo(e=>{let{src:t,fallback:s,className:i,...c}=e,[o,d]=(0,r.useState)(!0),[g,u]=(0,r.useState)(!1),m=()=>{d(!1)},x=()=>{d(!1),u(!0)};return(0,a.jsxs)(l.eu,{className:(0,n.cn)("relative",i),...c,children:[t&&!g&&(0,a.jsx)(l.BK,{src:t,alt:"user avatar",onLoadingStatusChange:e=>{"loaded"===e&&m(),"error"===e&&x()},className:(0,n.cn)("transition-opacity duration-300",o?"opacity-0":"opacity-100")}),(0,a.jsx)(l.q5,{className:(0,n.cn)("transition-opacity duration-300",!t||g||o?"opacity-100":"opacity-0"),children:s?s.charAt(0).toUpperCase():"O"})]})});i.displayName="UserAvatar"},14432:(e,t,s)=>{s.d(t,{A:()=>G});var a=s(95155),l=s(2920),r=s(69352),n=s(84736),i=s(76499),c=s(11473),o=s(85776),d=s(73267),g=s(95694),u=s(84949),m=s(3512),x=s(19346),h=s(58057),p=s(12115),b=s(73954),f=s(61231),A=s(14085),j=s(29602);let v=(0,p.forwardRef)(function(e,t){let[s,l]=(0,p.useState)(0),r=t=>{let s=e.items[t];s&&e.command({label:s.name||"",id:s.id||""})},n=()=>{l((s+e.items.length-1)%e.items.length)},i=()=>{l((s+1)%e.items.length)},c=()=>{r(s)};return(0,p.useEffect)(()=>l(0),[e.items]),(0,p.useImperativeHandle)(t,()=>({onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(n(),!0):"ArrowDown"===t.key?(i(),!0):"Enter"===t.key&&(c(),!0)}})),(0,a.jsx)("div",{className:"bg-gray-200 dark:bg-gray-900 border p-2 rounded-sm mention-dropdown-menu",children:e.items.length?e.items.map((e,t)=>(0,a.jsxs)(A.$,{variant:"ghost",className:(0,j.cn)("mention-btn-".concat(t),"w-full flex justify-start items-center py-1 px-2 rounded-sm",t===s?"bg-gray-50 dark:bg-gray-800":""),onClick:e=>{e.preventDefault(),e.stopPropagation(),r(t)},children:[(0,a.jsx)(f.H,{src:e.avatar,fallback:e.name,className:"w-4 h-4 mr-2"}),e.name]},t)):(0,a.jsx)("div",{className:"item",children:"No result"})})}),y=e=>({items:t=>{let{query:s}=t;return e.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().startsWith(s.toLowerCase())}).slice(0,5)},render:()=>{let e=null,t=null;return{onStart:s=>{e=new m.NV(v,{props:s,editor:s.editor}),s.clientRect&&(t=(0,b.Ay)("body",{getReferenceClientRect:s.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",onShow:()=>{let e=document.querySelector(".mention-btn-0");null==e||e.focus()}})[0])},onUpdate(s){null==e||e.updateProps(s),s.clientRect&&(null==t||t.setProps({getReferenceClientRect:s.clientRect||s.clientRect}))},onKeyDown(s){var a;return"Escape"===s.event.key?(null==t||t.hide(),!0):null==e?void 0:null===(a=e.ref)||void 0===a?void 0:a.onKeyDown(s)},onExit(){null==t||t.destroy(),null==e||e.destroy()}}}});var N=s(89282),k=s(20878),w=s(79201),C=s(97891),H=s(81024),L=s(28701),T=s(59021),R=s(68745),_=s(8818),S=s(20775),E=s(51719),M=s(76540),B=s(50992),K=s(91781),U=s(20750);let D=e=>{let{editor:t}=e;return t?(0,a.jsxs)(U.rI,{children:[(0,a.jsxs)(U.ty,{title:"Text align",className:"p-1 rounded-sm flex items-center gap-0 hover:bg-slate-200 dark:hover:bg-slate-700 text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(S.A,{className:"w-4 h-4"}),(0,a.jsx)(E.A,{className:"w-4 h-4"})]}),(0,a.jsxs)(U.SQ,{children:[(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().setTextAlign("left").run()},className:(0,j.cn)(t.isActive({textAlign:"left"})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(M.A,{className:"w-4 h-4 mr-2"})," ",(0,a.jsx)("span",{className:"text-xs",children:"Align left"})]}),(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().setTextAlign("center").run()},className:(0,j.cn)(t.isActive({textAlign:"center"})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(B.A,{className:"w-4 h-4 mr-2"})," ",(0,a.jsx)("span",{className:"text-xs",children:"Align center"})]}),(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().setTextAlign("right").run()},className:(0,j.cn)(t.isActive({textAlign:"right"})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(K.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"text-xs",children:"Align right"})]}),(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().setTextAlign("justify").run()},className:(0,j.cn)(t.isActive({textAlign:"justify"})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(S.A,{className:"w-4 h-4 mr-2"})," ",(0,a.jsx)("span",{className:"text-xs",children:"Align justify"})]})]})]}):null};var q=s(13609),I=s(35243),P=s(83174),V=s(78657);let O=e=>{let{editor:t}=e;return t?(0,a.jsxs)(U.rI,{children:[(0,a.jsxs)(U.ty,{className:"p-1 rounded-sm flex items-center gap-0 hover:bg-slate-200 dark:hover:bg-slate-700 text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(q.A,{className:"w-4 h-4"}),(0,a.jsx)(E.A,{className:"w-4 h-4"})]}),(0,a.jsxs)(U.SQ,{children:[(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().toggleHeading({level:1}).run()},className:(0,j.cn)(t.isActive("heading",{level:1})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(I.A,{className:"w-6 h-6 mr-2"})," ",(0,a.jsx)("span",{className:"text-xl",children:"Heading 1"})]}),(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().toggleHeading({level:2}).run()},className:(0,j.cn)(t.isActive("heading",{level:2})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(P.A,{className:"w-5 h-5 mr-2"})," ",(0,a.jsx)("span",{className:"text-lg",children:"Heading 2"})]}),(0,a.jsxs)(U._2,{onClick:()=>{t.chain().focus().toggleHeading({level:3}).run()},className:(0,j.cn)(t.isActive("heading",{level:3})?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),children:[(0,a.jsx)(V.A,{className:"w-4 h-4 mr-2"})," ",(0,a.jsx)("span",{className:"text-md",children:"Heading 3"})]})]})]}):null},$=e=>{let{isActive:t,children:s,...l}=e;return(0,a.jsx)(A.$,{className:(0,j.cn)("p-0 h-6 w-7 hover:bg-slate-200 dark:hover:bg-slate-700 text-gray-600 dark:text-gray-400",t?"bg-slate-200 dark:bg-slate-700":"bg-transparent"),...l,children:s})},Q=e=>{let{editor:t}=e;return t?(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-2",children:[(0,a.jsx)(O,{editor:t}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleBold().run()},isActive:t.isActive("bold"),title:"bold",children:(0,a.jsx)(k.A,{className:"w-4 h-4"})}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleItalic().run()},isActive:t.isActive("italic"),title:"italic",children:(0,a.jsx)(w.A,{className:"w-4 h-4"})}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleUnderline().run()},isActive:t.isActive("underline"),title:"underline",children:(0,a.jsx)(C.A,{className:"w-4 h-4"})}),(0,a.jsx)(N.Separator,{orientation:"vertical",className:"h-7"}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleCode().run()},isActive:t.isActive("code"),title:"code",children:(0,a.jsx)(H.A,{className:"w-4 h-4"})}),(0,a.jsx)(N.Separator,{orientation:"vertical",className:"h-7"}),(0,a.jsx)(D,{editor:t}),(0,a.jsx)(N.Separator,{orientation:"vertical",className:"h-7"}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleBulletList().run()},isActive:t.isActive("bulletList"),title:"bullet list",children:(0,a.jsx)(L.A,{className:"w-4 h-4"})}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleOrderedList().run()},isActive:t.isActive("orderedList"),title:"ordered list",children:(0,a.jsx)(T.A,{className:"w-4 h-4"})}),(0,a.jsx)($,{onClick:()=>{t.chain().focus().toggleCodeBlock().run()},isActive:t.isActive("codeBlock"),title:"code block",children:(0,a.jsx)(R.A,{className:"w-4 h-4"})}),(0,a.jsx)($,{onClick:()=>{t.commands.insertContent("@")},isActive:!1,title:"@ Mentions",children:(0,a.jsx)(_.A,{className:"w-4 h-4"})})]}):null},G=e=>{let{isEditable:t=!1,content:s,onChange:b,resetKey:f=0,users:A=[]}=e,j=(0,m.hG)({extensions:[h.A,u.A,c.A,r.Ay.configure({HTMLAttributes:{class:"rounded-xl px-3 py-1 bg-gray-100 dark:bg-gray-900 my-2"}}),g.A.configure({types:["heading","paragraph"],defaultAlignment:"left"}),i.A.configure({levels:[1,2,3]}),l.Ay.configure({HTMLAttributes:{class:"pl-8"}}),d.Ay.configure({HTMLAttributes:{class:"pl-8"}}),n.Ay.configure({HTMLAttributes:{class:"bg-gray-100 dark:bg-gray-900 rounded-sm p-4 border border-gray-200 dark:border-gray-800 my-2"}}),o.Ay.configure({HTMLAttributes:{class:"text-sky-700 dark:text-sky-500"},renderHTML(e){var t;let{options:s,node:a}=e;return["a",(0,x.KV)({href:"/profile/".concat(a.attrs.id)},s.HTMLAttributes),"".concat(s.suggestion.char).concat(null!==(t=a.attrs.label)&&void 0!==t?t:a.attrs.id)]},suggestion:y(A)})],editable:t,content:s,editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-xl px-2 pb-2 pt-3 border ".concat(t?"border-t-0":"border-0"," border-gray-200 dark:border-gray-800 rounded-b-sm ").concat(t?"min-h-[180px]":""," w-full  focus:ring-0 focus:outline-none text-xs")}},onUpdate:e=>{let{editor:t}=e;b(t.getHTML())}});return(0,p.useEffect)(()=>{j&&f>0&&j.commands.setContent("")},[j,f]),(0,p.useEffect)(()=>{null==j||j.setEditable(!0)},[t]),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{children:[t&&(0,a.jsx)("div",{className:"bg-slate-100 dark:bg-gray-900 overflow-x-auto border rounded-t-sm",children:(0,a.jsx)(Q,{editor:j})}),(0,a.jsx)(m.$Z,{editor:j})]})})}},63898:(e,t,s)=>{s.d(t,{BK:()=>c,eu:()=>i,q5:()=>o});var a=s(95155),l=s(12115),r=s(74920),n=s(29602);let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});i.displayName=r.bL.displayName;let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",s),...l})});c.displayName=r._V.displayName;let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",s),...l})});o.displayName=r.H4.displayName}}]);